<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–æ–≤–∞—Ä - –ü–æ–ª–∏–ê—Ä—Ç</title>
    <link rel="stylesheet" href="css/HeaderAndFooter.css">
    <link rel="stylesheet" href="css/product.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∏–º —Å—Ç–∏–ª–∏ –æ—Ç–∑—ã–≤–æ–≤ -->
    <link rel="stylesheet" href="css/auth.css">
</head>
<body>
    <!-- –•–µ–¥–µ—Ä -->
    <header class="header"></header>

    <main class="product-page">
        <div class="background-block">
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ -->
            <section class="product-main">
                <div class="container">
                    <div class="product-main__inner">
                        <div class="product-actions">
                            <button class="btn btn--primary" id="orderBtn">
                                <span>üõí –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</span>
                            </button>
                        </div>
                        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ JS -->
                    </div>
                </div>
            </section>

            <!-- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
            <section class="product-details">
                <div class="container">
                    <div class="tabs">
                        <div class="tabs-nav">
                            <button class="tab-btn active" data-tab="description">–û–ø–∏—Å–∞–Ω–∏–µ</button>
                            <button class="tab-btn" data-tab="specifications">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</button>
                            <button class="tab-btn" data-tab="reviews">–û—Ç–∑—ã–≤—ã</button>
                            <button class="tab-btn" data-tab="delivery">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞</button>
                        </div>

                        <div class="tabs-content">
                            <!-- –í–∫–ª–∞–¥–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º -->
                            <div class="tab-pane active" id="description">
                                <!-- –û–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ JavaScript -->
                            </div>

                            <!-- –í–∫–ª–∞–¥–∫–∞ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ -->
                            <div class="tab-pane" id="specifications">
                                <div class="specs-table">
                                    <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã JavaScript -->
                                </div>
                            </div>

                            <!-- –í–∫–ª–∞–¥–∫–∞ —Å –æ—Ç–∑—ã–≤–∞–º–∏ -->
                            <div class="tab-pane" id="reviews">
                                <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ -->
                                <div id="reviewsContainer">
                                    <div class="reviews-header">
                                        <h2 class="reviews-title">–û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h2>
                                        <div class="reviews-stats">
                                            <div class="reviews-average">0.0 ‚òÖ</div>
                                            <div class="reviews-count">0 –æ—Ç–∑—ã–≤–æ–≤</div>
                                        </div>
                                    </div>
                                    <div class="reviews-actions">
                                        <button class="review-add-btn" id="addReviewBtn">
                                            <span>üí¨ –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</span>
                                        </button>
                                    </div>
                                    <div class="reviews-list" id="reviewsList">
                                        <!-- –û—Ç–∑—ã–≤—ã –∑–∞–≥—Ä—É–∑—è—Ç—Å—è JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- –í–∫–ª–∞–¥–∫–∞ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π -->
                            <div class="tab-pane" id="delivery">
                                <h2>–î–æ—Å—Ç–∞–≤–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</h2>
                                <div class="delivery-options">
                                    <div class="delivery-option">
                                        <div class="box-line">
                                            <img src="image/icon/thuislevering.png" alt="–ì—Ä—É–∑–æ–≤–∏–∫">
                                            <h3>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</h3>
                                        </div>
                                        <p>–ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 15 000 ‚ÇΩ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –í–µ–ª–∏–∫–æ–≥–æ –ù–æ–≤–≥–æ—Ä–æ–¥–∞</p>
                                    </div>
                                    <div class="delivery-option">
                                        <div class="box-line">
                                            <img src="image/icon/flash.png" alt="–ú–æ–ª–Ω–∏—è">
                                            <h3>–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞</h3>
                                        </div>
                                        <p>–ú–æ–Ω—Ç–∞–∂ –¥–≤–µ—Ä–∏ –æ–ø—ã—Ç–Ω—ã–º–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏ –∑–∞ 1-2 —á–∞—Å–∞</p>
                                    </div>
                                    <div class="delivery-option">
                                        <div class="box-line">
                                            <img src="image/icon/installation.png" alt="–ì–∞—è—á–Ω—ã–π –∫–ª—é—á">
                                            <h3>–í—ã–Ω–æ—Å —Å—Ç–∞—Ä–æ–π –¥–≤–µ—Ä–∏</h3>
                                        </div>
                                        <p>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–µ–º–æ–Ω—Ç–∞–∂ –∏ –≤—ã–Ω–æ—Å —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</p>
                                    </div>
                                </div>
                                <div class="delivery-terms">
                                    <h3>–°—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏:</h3>
                                    <ul>
                                        <li>–í–µ–ª–∏–∫–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥ - 1-2 –¥–Ω—è</li>
                                        <li>–û–±–ª–∞—Å—Ç—å - 3-5 –¥–Ω–µ–π</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–∑—ã–≤–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ) -->
        <div id="reviewModal" class="review-modal" style="display: none;">
            <div class="review-modal__overlay"></div>
            <div class="review-modal__content">
                <div class="review-modal__header">
                    <h2 class="review-modal__title">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h2>
                    <button class="review-modal__close" id="closeReviewModal">
                        <span>√ó</span>
                    </button>
                </div>
                
                <div class="review-modal__body">
                    <div class="review-rating">
                        <div class="review-rating__title">–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞:</div>
                        <div class="review-rating__stars">
                            <div class="star" data-rating="1">‚òÖ</div>
                            <div class="star" data-rating="2">‚òÖ</div>
                            <div class="star" data-rating="3">‚òÖ</div>
                            <div class="star" data-rating="4">‚òÖ</div>
                            <div class="star" data-rating="5">‚òÖ</div>
                        </div>
                        <div class="review-rating__value" id="ratingValue">0 –∏–∑ 5</div>
                    </div>
                    
                    <div class="review-form">
                        <div class="form-group">
                            <label for="reviewComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                            <textarea 
                                id="reviewComment" 
                                class="review-comment" 
                                placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–∞—à–∏–º –º–Ω–µ–Ω–∏–µ–º –æ —Ç–æ–≤–∞—Ä–µ..." 
                                rows="5"
                                maxlength="1000"
                            ></textarea>
                            <div class="review-comment-counter">
                                <span id="charCount">0</span> / 1000 —Å–∏–º–≤–æ–ª–æ–≤
                            </div>
                        </div>
                        
                        <div class="review-form__actions">
                            <button class="btn btn--secondary review-form__cancel" id="cancelReview">
                                –û—Ç–º–µ–Ω–∞
                            </button>
                            <button class="btn btn--primary review-form__submit" id="submitReview" disabled>
                                <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</span>
                                <span class="btn-icon">üì§</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="review-modal__footer">
                    <div class="review-notice">
                        <span class="review-notice__icon">‚ÑπÔ∏è</span>
                        <span class="review-notice__text">
                            –í–∞—à –æ—Ç–∑—ã–≤ –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º.
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã -->
        <section class="recommended-products">
            <div class="container">
                <h2>–í–∞–º —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è</h2>
                
                <!-- –ó–∞–≥—Ä—É–∑—á–∏–∫ -->
                <div id="similarLoading" class="loading">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤...</p>
                </div>
                
                <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div class="products-grid" id="similarProductsGrid">
                    <!-- –¢–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div id="noSimilarProducts" class="no-results" style="display: none;">
                    <h3>–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p>–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞—Å –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –¥—Ä—É–≥–∏–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –Ω–∞—à–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
                    <a href="catalog.html" class="btn btn--primary">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
                </div>
            </div>
        </section>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer"></footer>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;">
        <div class="modal" id="measureModal">
            <button class="modal-close" id="modalClose">&times;</button>
            <h2>–í—ã–∑–≤–∞—Ç—å –∑–∞–º–µ—Ä—â–∏–∫–∞</h2>
            <!-- –§–æ—Ä–º–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ JavaScript -->
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <div class="modal-overlay" id="orderModal" style="display: none;">
        <div class="modal modal--order">
            <button class="modal-close" id="closeOrderModal">&times;</button>
            
            <div class="order-modal__content">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º -->
                <div class="order-type-switch">
                    <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
                    <div class="switch-container">
                        <label class="switch-label active" data-type="single">
                            <input type="radio" name="orderType" value="single" checked>
                            <span class="switch-text">–û–¥–∏–Ω —Ç–æ–≤–∞—Ä</span>
                        </label>
                        <label class="switch-label" data-type="multiple">
                            <input type="radio" name="orderType" value="multiple">
                            <span class="switch-text">–ù–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤</span>
                        </label>
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ -->
                <div class="order-product-info" id="orderProductInfo">
                    <div class="product-summary">
                        <img id="orderProductImage" src="" alt="–¢–æ–≤–∞—Ä">
                        <div class="product-details">
                            <h3 id="orderProductName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h3>
                            <div class="product-price" id="orderProductPrice">0 ‚ÇΩ</div>
                            <div class="product-quantity">
                                <button class="qty-btn qty-minus">-</button>
                                <input type="number" id="orderQuantity" value="1" min="1" max="99">
                                <button class="qty-btn qty-plus">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –û–ø—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ -->
                <div class="delivery-options">
                    <h3>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</h3>
                    <div class="option-group">
                        <label class="option-item">
                            <input type="radio" name="delivery" value="pickup" checked>
                            <div class="option-content">
                                <div class="option-icon">üè™</div>
                                <div class="option-text">
                                    <div class="option-title">–°–∞–º–æ–≤—ã–≤–æ–∑</div>
                                    <div class="option-description">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Ä¢ –≥. –í–µ–ª–∏–∫–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥</div>
                                </div>
                            </div>
                        </label>
                        
                        <label class="option-item">
                            <input type="radio" name="delivery" value="delivery">
                            <div class="option-content">
                                <div class="option-icon">üöö</div>
                                <div class="option-text">
                                    <div class="option-title">–î–æ—Å—Ç–∞–≤–∫–∞</div>
                                    <div class="option-description">500 ‚ÇΩ ‚Ä¢ 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</div>
                                </div>
                            </div>
                        </label>
                        
                        <label class="option-item">
                            <input type="radio" name="delivery" value="installation">
                            <div class="option-content">
                                <div class="option-icon">üë∑</div>
                                <div class="option-text">
                                    <div class="option-title">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞</div>
                                    <div class="option-description" id="installationPrice">–æ—Ç 1 500 ‚ÇΩ</div>
                                </div>
                            </div>
                        </label>
                    </div>

                    <!-- –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                    <div class="delivery-address" id="deliveryAddress" style="display: none;">
                        <h4>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h4>
                        <textarea id="addressInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏..." rows="3"></textarea>
                    </div>
                </div>

                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ -->
                <div class="additional-services">
                    <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</h3>
                    <div class="services-list">
                        <label class="service-item">
                            <input type="checkbox" id="serviceWarranty">
                            <div class="service-content">
                                <div class="service-icon">üõ°Ô∏è</div>
                                <div class="service-text">
                                    <div class="service-title">–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è</div>
                                    <div class="service-price">+ 500 ‚ÇΩ</div>
                                </div>
                            </div>
                        </label>
                        
                        <label class="service-item">
                            <input type="checkbox" id="serviceAssembly">
                            <div class="service-content">
                                <div class="service-icon">üß∞</div>
                                <div class="service-text">
                                    <div class="service-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–æ–Ω—Ç–∞–∂</div>
                                    <div class="service-price">+ 1 000 ‚ÇΩ</div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å -->
                <div class="order-summary">
                    <h3>–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</h3>
                    <div class="summary-details">
                        <div class="summary-row">
                            <span>–¢–æ–≤–∞—Ä:</span>
                            <span id="summaryProduct">0 ‚ÇΩ</span>
                        </div>
                        <div class="summary-row">
                            <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                            <span id="summaryDelivery">0 ‚ÇΩ</span>
                        </div>
                        <div class="summary-row">
                            <span>–£—Å–ª—É–≥–∏:</span>
                            <span id="summaryServices">0 ‚ÇΩ</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>–ö –æ–ø–ª–∞—Ç–µ:</span>
                            <span id="summaryTotal">0 ‚ÇΩ</span>
                        </div>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="order-actions">
                    <button class="btn btn--secondary" id="cancelOrder">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn--primary" id="submitOrder">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JS —Ñ–∞–π–ª–æ–≤ -->
    <script src="https://unpkg.com/pocketbase/dist/pocketbase.umd.js"></script>
    <script src="js/header.js"></script>
    <script src="js/product.js"></script>
    <script src="js/auth-state.js"></script>
    <script src="js/reviews.js"></script>
    <script src="js/product-manager.js"></script>
    <script src="js/product-buttons.js"></script>
    <script src="js/simple-product-buttons.js"></script>
    <script src="js/footer.js"></script>
    
    <script>
        // –£–±–µ–¥–∏–º—Å—è —á—Ç–æ –æ—Ç–∑—ã–≤—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞
        document.addEventListener('DOMContentLoaded', function() {
            // –ü–æ–¥–æ–∂–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ —á—Ç–æ–±—ã product.js —É—Å–ø–µ–ª –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä
            setTimeout(() => {
                if (window.reviewSystem) {
                    console.log('‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
                } else {
                    console.log('üîÑ –†—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –æ—Ç–∑—ã–≤–æ–≤');
                    // –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è productId –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
                    if (!window.currentProductId && window.location.search.includes('id=')) {
                        const urlParams = new URLSearchParams(window.location.search);
                        window.currentProductId = urlParams.get('id');
                    }
                    
                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –æ—Ç–∑—ã–≤–æ–≤
                    window.reviewSystem = new ReviewSystem();
                }
            }, 1000);
        });
    </script>
</body>
</html>